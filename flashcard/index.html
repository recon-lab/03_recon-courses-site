<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Flashcards App</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
</head>
<body>
  <div id="root"></div>
  
  <!-- SUPABASE SETUP:
  1. supabase.com - create FREE account
  2. Create project
  3. SQL Editor: CREATE TABLE flashcards (id BIGINT PRIMARY KEY DEFAULT 1, data JSONB NOT NULL, updated_at TIMESTAMP DEFAULT NOW());
  4. Settings > API - copy URL and anon key
  5. Replace below -->

  <script type="text/babel">
    const { useState, useEffect } = React;
    
const SUPABASE_URL = 'https://ngjncwnfojxvjpcsdxvl.supabase.co';
const SUPABASE_KEY = 'sb_publishable_TMgqTvWid2r1lKOU7enJEg_0BmykCGS';
const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

    const Icon = ({ d, className = "w-5 h-5" }) => (
      <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d={d} />
      </svg>
    );

    function App() {
      const [data, setData] = useState({
        categories: ['Japanese','French','Spanish','English Vocabulary','General Knowledge','Science','History','Math','Programming','Business','Health','Other'],
        entries: [], difficulty: {}, history: []
      });
      const [ui, setUI] = useState({
        view: 'log', editing: null, card: 0, showAnswer: false, shuffle: false, quiz: false, quizAnswer: '',
        filters: { category: 'All', deck: 'All', tag: 'All', starred: false }
      });
      const [form, setForm] = useState({
        date: new Date().toISOString().split('T')[0], topic: '', notes: '', category: 'General Knowledge',
        cardType: 'vocabulary', frontImage: null, backImage: null, tags: [], deck: '', starred: false
      });
      const [temp, setTemp] = useState({ tagInput: '', newCategory: '', editCat: null, editCatName: '', syncing: false });
      const [loaded, setLoaded] = useState(false);

      useEffect(() => { loadData(); }, []);
      useEffect(() => {
        if (loaded && data.entries.length >= 0) {
          const t = setTimeout(() => saveData(), 1000);
          return () => clearTimeout(t);
        }
      }, [data, loaded]);

 const loadData = async () => {
  try {
    const { data: result } = await supabase.from('flashcards').select('*').eq('id', 1).single();
    if (result?.data) {
      setData({ ...data, ...result.data });
    }
    setLoaded(true);
  } catch (e) {
    console.error(e);
    setLoaded(true);
  }
};

const saveData = async () => {
  try {
    setTemp({ ...temp, syncing: true });
    await supabase.from('flashcards').upsert({ id: 1, data, updated_at: new Date().toISOString() });
    setTemp({ ...temp, syncing: false });
  } catch (e) {
    console.error(e);
  }
};

      const cardTypes = {
        vocabulary: { name: 'Vocabulary', front: 'Word', back: 'Translation' },
        qa: { name: 'Q&A', front: 'Question', back: 'Answer' },
        cloze: { name: 'Fill-in', front: 'Sentence ___', back: 'Complete' },
        image: { name: 'Image', front: 'Front', back: 'Back' }
      };

      const filtered = data.entries.filter(e => {
        if (ui.filters.category !== 'All' && e.category !== ui.filters.category) return false;
        if (ui.filters.deck !== 'All' && e.deck !== ui.filters.deck) return false;
        if (ui.filters.tag !== 'All' && (!e.tags || !e.tags.includes(ui.filters.tag))) return false;
        if (ui.filters.starred && !e.starred) return false;
        return true;
      });

      const allTags = [...new Set(data.entries.flatMap(e => e.tags || []))];
      const allDecks = [...new Set(data.entries.map(e => e.deck).filter(Boolean))];

      const cards = (() => {
        let c = filtered;
        if (ui.shuffle) c = [...c].sort(() => Math.random() - 0.5);
        else c = [...c].sort((a, b) => (data.difficulty[b.id] || 0) - (data.difficulty[a.id] || 0));
        return c;
      })();

      const addEntry = () => {
        if (form.topic && form.notes) {
          setData({ ...data, entries: [...data.entries, { ...form, id: Date.now() }] });
          setForm({ date: new Date().toISOString().split('T')[0], topic: '', notes: '', category: 'General Knowledge',
            cardType: 'vocabulary', frontImage: null, backImage: null, tags: [], deck: '', starred: false });
          setTemp({ ...temp, tagInput: '' });
        }
      };

      const markDiff = (d) => {
        const id = cards[ui.card].id;
        const v = { easy: -1, medium: 0, hard: 2 }[d];
        setData({
          ...data,
          difficulty: { ...data.difficulty, [id]: (data.difficulty[id] || 0) + v },
          history: [...data.history, { cardId: id, date: new Date().toISOString().split('T')[0], difficulty: d, correct: d === 'easy' }]
        });
        nextCard();
      };

      const nextCard = () => setUi({ ...ui, card: (ui.card + 1) % cards.length, showAnswer: false, quizAnswer: '' });
      const prevCard = () => setUi({ ...ui, card: (ui.card - 1 + cards.length) % cards.length, showAnswer: false, quizAnswer: '' });

      const stats = (() => {
        const today = new Date().toISOString().split('T')[0];
        const week = Array.from({ length: 7 }, (_, i) => {
          const d = new Date(); d.setDate(d.getDate() - i);
          return d.toISOString().split('T')[0];
        });
        const todayCount = data.history.filter(h => h.date === today).length;
        const weekCount = data.history.filter(h => week.includes(h.date)).length;
        const quizzes = data.history.filter(h => h.mode === 'quiz');
        const accuracy = quizzes.length > 0 ? Math.round((quizzes.filter(h => h.correct).length / quizzes.length) * 100) : 0;
        return { today: todayCount, week: weekCount, accuracy, total: data.history.length };
      })();

      const handleImage = (side, file) => {
        if (!file) return;
        const reader = new FileReader();
        reader.onloadend = () => {
          const update = { [`${side}Image`]: reader.result };
          ui.editing ? setUi({ ...ui, editing: { ...ui.editing, ...update } }) : setForm({ ...form, ...update });
        };
        reader.readAsDataURL(file);
      };

      const exportData = (format) => {
        const content = format === 'json'
          ? JSON.stringify(data, null, 2)
          : [['Date','Category','Deck','Type','Question','Answer','Tags','Starred'], ...data.entries.map(e => 
              [e.date, e.category, e.deck||'', e.cardType, e.topic, e.notes, (e.tags||[]).join(';'), e.starred?'Yes':'No']
            )].map(r => r.map(c => `"${c}"`).join(',')).join('\n');
        const blob = new Blob([content], { type: format === 'json' ? 'application/json' : 'text/csv' });
        const a = document.createElement('a');
        a.href = URL.createObjectURL(blob);
        a.download = `flashcards.${format}`;
        a.click();
      };

      const importData = (e) => {
        const file = e.target.files[0];
        if (!file) return;
        const reader = new FileReader();
        reader.onload = (ev) => {
          try {
            const content = JSON.parse(ev.target.result);
            if (content.entries) setData({ ...data, entries: [...data.entries, ...content.entries] });
            alert('Imported!');
          } catch (err) { alert('Error: ' + err.message); }
        };
        reader.readAsText(file);
        e.target.value = '';
      };
return (
        <div className="min-h-screen bg-gradient-to-br from-indigo-50 to-purple-50 p-4">
          <div className="max-w-5xl mx-auto">
            <div className="bg-white rounded-2xl shadow-xl p-6">
              <div className="flex justify-between items-center mb-8">
                <div className="flex items-center gap-3">
                  <Icon d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" className="w-8 h-8 text-indigo-600" />
                  <h1 className="text-3xl font-bold">Learning Tracker</h1>
                  {temp.syncing && <span className="text-xs text-green-600">‚óè Syncing...</span>}
                </div>
                <div className="flex gap-2">
                  {['log','flashcards','stats','settings'].map(v => (
                    <button key={v} onClick={() => setUi({...ui, view: v})} className={`px-4 py-2 rounded-lg text-sm font-medium ${ui.view === v ? 'bg-indigo-600 text-white' : 'bg-gray-100'}`}>
                      {v==='log'?'Cards':v==='flashcards'?'Study':v==='stats'?'Stats':'Manage'}
                    </button>
                  ))}
                </div>
              </div>

              {ui.view === 'log' && (
                <div>
                  <div className="bg-indigo-50 rounded-xl p-6 mb-6">
                    <h2 className="text-xl font-semibold mb-4">{ui.editing ? 'Edit' : 'Add'} Card</h2>
                    <div className="space-y-4">
                      <div className="grid grid-cols-2 gap-4">
                        <input type="date" value={(ui.editing||form).date} onChange={e => ui.editing ? setUi({...ui,editing:{...ui.editing,date:e.target.value}}) : setForm({...form,date:e.target.value})} className="px-4 py-2 border rounded-lg" />
                        <select value={(ui.editing||form).category} onChange={e => ui.editing ? setUi({...ui,editing:{...ui.editing,category:e.target.value}}) : setForm({...form,category:e.target.value})} className="px-4 py-2 border rounded-lg">
                          {data.categories.map(c => <option key={c}>{c}</option>)}
                        </select>
                      </div>
                      <div className="grid grid-cols-2 gap-4">
                        <select value={(ui.editing||form).cardType} onChange={e => ui.editing ? setUi({...ui,editing:{...ui.editing,cardType:e.target.value}}) : setForm({...form,cardType:e.target.value})} className="px-4 py-2 border rounded-lg">
                          {Object.entries(cardTypes).map(([k,v]) => <option key={k} value={k}>{v.name}</option>)}
                        </select>
                        <input placeholder="Deck (optional)" value={(ui.editing||form).deck||''} onChange={e => ui.editing ? setUi({...ui,editing:{...ui.editing,deck:e.target.value}}) : setForm({...form,deck:e.target.value})} className="px-4 py-2 border rounded-lg" />
                      </div>
                      <div>
                        <div className="flex gap-2 mb-2">
                          <input placeholder="Add tag" value={temp.tagInput} onChange={e => setTemp({...temp,tagInput:e.target.value})} onKeyPress={e => {
                            if (e.key === 'Enter') {
                              const t = temp.tagInput.trim();
                              if (t) {
                                const current = ui.editing || form;
                                const tags = current.tags || [];
                                if (!tags.includes(t)) {
                                  ui.editing ? setUi({...ui,editing:{...ui.editing,tags:[...tags,t]}}) : setForm({...form,tags:[...tags,t]});
                                }
                                setTemp({...temp,tagInput:''});
                              }
                            }
                          }} className="flex-1 px-4 py-2 border rounded-lg" />
                        </div>
                        <div className="flex flex-wrap gap-2">
                          {((ui.editing||form).tags||[]).map(tag => (
                            <span key={tag} className="px-3 py-1 bg-blue-100 text-blue-700 text-sm rounded-full flex items-center gap-1">
                              {tag}
                              <button onClick={() => {
                                const current = ui.editing || form;
                                const newTags = current.tags.filter(t => t !== tag);
                                ui.editing ? setUi({...ui,editing:{...ui.editing,tags:newTags}}) : setForm({...form,tags:newTags});
                              }}>√ó</button>
                            </span>
                          ))}
                        </div>
                      </div>
                      <textarea placeholder={cardTypes[(ui.editing||form).cardType].front} value={(ui.editing||form).topic} onChange={e => ui.editing ? setUi({...ui,editing:{...ui.editing,topic:e.target.value}}) : setForm({...form,topic:e.target.value})} rows="3" className="w-full px-4 py-2 border rounded-lg" />
                      {(ui.editing||form).cardType === 'image' && (
                        <div>
                          {(ui.editing||form).frontImage ? (
                            <div className="relative inline-block">
                              <img src={(ui.editing||form).frontImage} className="max-h-32 rounded border" />
                              <button onClick={() => ui.editing ? setUi({...ui,editing:{...ui.editing,frontImage:null}}) : setForm({...form,frontImage:null})} className="absolute top-1 right-1 bg-red-500 text-white rounded-full p-1">√ó</button>
                            </div>
                          ) : (
                            <label className="cursor-pointer px-4 py-2 bg-gray-100 rounded-lg inline-block">
                              Add Front Image
                              <input type="file" accept="image/*" onChange={e => handleImage('front',e.target.files[0])} className="hidden" />
                            </label>
                          )}
                        </div>
                      )}
                      <textarea placeholder={cardTypes[(ui.editing||form).cardType].back} value={(ui.editing||form).notes} onChange={e => ui.editing ? setUi({...ui,editing:{...ui.editing,notes:e.target.value}}) : setForm({...form,notes:e.target.value})} rows="3" className="w-full px-4 py-2 border rounded-lg" />
                      {(ui.editing||form).cardType === 'image' && (ui.editing||form).backImage && (
                        <div className="relative inline-block">
                          <img src={(ui.editing||form).backImage} className="max-h-32 rounded border" />
                          <button onClick={() => ui.editing ? setUi({...ui,editing:{...ui.editing,backImage:null}}) : setForm({...form,backImage:null})} className="absolute top-1 right-1 bg-red-500 text-white rounded-full p-1">√ó</button>
                        </div>
                      )}
                      {(ui.editing||form).cardType === 'image' && !(ui.editing||form).backImage && (
                        <label className="cursor-pointer px-4 py-2 bg-gray-100 rounded-lg inline-block">
                          Add Back Image
                          <input type="file" accept="image/*" onChange={e => handleImage('back',e.target.files[0])} className="hidden" />
                        </label>
                      )}
                      {ui.editing ? (
                        <div className="flex gap-3">
                          <button onClick={() => {setData({...data,entries:data.entries.map(e => e.id === ui.editing.id ? ui.editing : e)}); setUi({...ui,editing:null});}} className="flex-1 bg-indigo-600 text-white py-3 rounded-lg">Save</button>
                          <button onClick={() => setUi({...ui,editing:null})} className="flex-1 bg-gray-300 py-3 rounded-lg">Cancel</button>
                        </div>
                      ) : (
                        <button onClick={addEntry} className="w-full bg-indigo-600 text-white py-3 rounded-lg">Add Card</button>
                      )}
                    </div>
                  </div>

                  <div className="grid grid-cols-4 gap-3 mb-4">
                    <select value={ui.filters.category} onChange={e => setUi({...ui,filters:{...ui.filters,category:e.target.value}})} className="px-3 py-2 border rounded-lg text-sm">
                      <option>All</option>
                      {data.categories.map(c => <option key={c}>{c}</option>)}
                    </select>
                    <select value={ui.filters.deck} onChange={e => setUi({...ui,filters:{...ui.filters,deck:e.target.value}})} className="px-3 py-2 border rounded-lg text-sm">
                      <option>All</option>
                      {allDecks.map(d => <option key={d}>{d}</option>)}
                    </select>
                    <select value={ui.filters.tag} onChange={e => setUi({...ui,filters:{...ui.filters,tag:e.target.value}})} className="px-3 py-2 border rounded-lg text-sm">
                      <option>All</option>
                      {allTags.map(t => <option key={t}>{t}</option>)}
                    </select>
                    <button onClick={() => setUi({...ui,filters:{...ui.filters,starred:!ui.filters.starred}})} className={`px-3 py-2 rounded-lg text-sm ${ui.filters.starred ? 'bg-yellow-500 text-white' : 'bg-gray-200'}`}>
                      {ui.filters.starred ? 'Starred' : 'All'}
                    </button>
                  </div>

                  <div className="space-y-4">
                    <h2 className="text-xl font-semibold">Cards ({filtered.length})</h2>
                    {filtered.length === 0 ? (
                      <p className="text-center py-12 text-gray-500">No cards yet!</p>
                    ) : (
                      filtered.map(e => (
                        <div key={e.id} className="border rounded-xl p-5 hover:shadow-md">
                          <div className="flex justify-between mb-3">
                            <div className="flex gap-2 flex-wrap">
                              <span className="px-3 py-1 bg-indigo-100 text-indigo-700 text-xs rounded-full">{e.category}</span>
                              {e.deck && <span className="px-3 py-1 bg-teal-100 text-teal-700 text-xs rounded-full">{e.deck}</span>}
                              {(e.tags||[]).map(t => <span key={t} className="px-2 py-1 bg-blue-100 text-blue-700 text-xs rounded-full">{t}</span>)}
                            </div>
                            <div className="flex gap-2">
                              <button onClick={() => setData({...data,entries:data.entries.map(x => x.id === e.id ? {...x,starred:!x.starred} : x)})} className={e.starred ? 'text-yellow-500' : 'text-gray-400'}>‚òÖ</button>
                              <button onClick={() => setUI({...ui,editing:{...e}})} className="text-indigo-600">‚úé</button>
                              <button onClick={() => {if(confirm('Delete?'))setData({...data,entries:data.entries.filter(x => x.id !== e.id)});}} className="text-red-500">üóë</button>
                            </div>
                          </div>
                          <h3 className="text-lg font-semibold mb-2">{e.topic}</h3>
                          {e.frontImage && <img src={e.frontImage} className="max-h-32 rounded mb-2" />}
                          <p className="text-gray-600">{e.notes}</p>
                          {e.backImage && <img src={e.backImage} className="max-h-32 rounded mt-2" />}
                        </div>
                      ))
                    )}
                  </div>
                </div>
              )}

              {ui.view === 'flashcards' && (
                <div>
                  {cards.length === 0 ? (
                    <p className="text-center py-12 text-gray-500">No cards to study!</p>
                  ) : (
                    <div className="space-y-6">
                      <div className="flex gap-3">
                        <button onClick={() => setUI({...ui,shuffle:!ui.shuffle,card:0})} className={`flex-1 py-2 px-4 rounded-lg ${ui.shuffle ? 'bg-purple-600 text-white' : 'bg-gray-200'}`}>
                          {ui.shuffle ? 'Shuffled' : 'Shuffle'}
                        </button>
                        <button onClick={() => setUI({...ui,quiz:!ui.quiz,showAnswer:false})} className={`flex-1 py-2 px-4 rounded-lg ${ui.quiz ? 'bg-green-600 text-white' : 'bg-gray-200'}`}>
                          {ui.quiz ? 'Quiz' : 'Study'}
                        </button>
                      </div>
                      <div className="text-center text-sm">Card {ui.card + 1} of {cards.length}</div>
                      <div onClick={() => !ui.quiz && setUI({...ui,showAnswer:!ui.showAnswer})} className={`bg-gradient-to-br ${ui.quiz ? 'from-green-500 to-emerald-600' : 'from-indigo-500 to-purple-600'} rounded-2xl p-8 min-h-80 flex items-center justify-center ${!ui.quiz ? 'cursor-pointer' : ''}`}>
                        <div className="text-center">
                          <span className="px-4 py-2 bg-white/20 text-white text-sm rounded-full mb-4 inline-block">{cards[ui.card].category}</span>
                          <p className="text-white text-2xl font-semibold mb-4">{ui.showAnswer ? 'Answer' : 'Question'}</p>
                          <p className="text-white text-xl">{ui.showAnswer ? cards[ui.card].notes : cards[ui.card].topic}</p>
                          {ui.showAnswer && cards[ui.card].backImage && <img src={cards[ui.card].backImage} className="max-h-48 mx-auto rounded-lg mt-4" />}
                          {!ui.showAnswer && cards[ui.card].frontImage && <img src={cards[ui.card].frontImage} className="max-h-48 mx-auto rounded-lg mt-4" />}
                        </div>
                      </div>
                      {ui.showAnswer && !ui.quiz && (
                        <div className="flex gap-2 justify-center">
                          <button onClick={() => markDiff('easy')} className="px-6 py-2 bg-green-500 text-white rounded-lg">Easy</button>
                          <button onClick={() => markDiff('medium')} className="px-6 py-2 bg-yellow-500 text-white rounded-lg">Medium</button>
                          <button onClick={() => markDiff('hard')} className="px-6 py-2 bg-red-500 text-white rounded-lg">Hard</button>
                        </div>
                      )}
                      <div className="flex gap-3 justify-center">
                        <button onClick={prevCard} className="px-6 py-3 bg-gray-200 rounded-lg">Previous</button>
                        {!ui.quiz && <button onClick={() => setUI({...ui,showAnswer:!ui.showAnswer})} className="px-6 py-3 bg-indigo-600 text-white rounded-lg">Flip</button>}
                        <button onClick={nextCard} className="px-6 py-3 bg-gray-200 rounded-lg">Next</button>
                      </div>
                    </div>
                  )}
                </div>
              )}
{ui.view === 'stats' && (
                <div>
                  <h2 className="text-2xl font-semibold mb-6">Statistics</h2>
                  <div className="grid grid-cols-4 gap-4 mb-8">
                    <div className="bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl p-6 text-white">
                      <p className="text-sm opacity-90">Today</p>
                      <p className="text-3xl font-bold">{stats.today}</p>
                      <p className="text-xs opacity-75">cards</p>
                    </div>
                    <div className="bg-gradient-to-br from-green-500 to-green-600 rounded-xl p-6 text-white">
                      <p className="text-sm opacity-90">Week</p>
                      <p className="text-3xl font-bold">{stats.week}</p>
                      <p className="text-xs opacity-75">cards</p>
                    </div>
                    <div className="bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl p-6 text-white">
                      <p className="text-sm opacity-90">Accuracy</p>
                      <p className="text-3xl font-bold">{stats.accuracy}%</p>
                      <p className="text-xs opacity-75">quiz</p>
                    </div>
                    <div className="bg-gradient-to-br from-orange-500 to-orange-600 rounded-xl p-6 text-white">
                      <p className="text-sm opacity-90">Total</p>
                      <p className="text-3xl font-bold">{stats.total}</p>
                      <p className="text-xs opacity-75">reviews</p>
                    </div>
                  </div>
                  <div className="bg-white rounded-xl border p-6">
                    <h3 className="text-lg font-semibold mb-4">Card Difficulty</h3>
                    <div className="space-y-3">
                      {['hard','medium','easy'].map(level => {
                        const count = Object.values(data.difficulty).filter(d => {
                          if (level === 'hard') return d >= 2;
                          if (level === 'medium') return d > -1 && d < 2;
                          return d <= -1;
                        }).length;
                        const pct = data.entries.length > 0 ? (count / data.entries.length) * 100 : 0;
                        return (
                          <div key={level}>
                            <div className="flex justify-between text-sm mb-1">
                              <span className="capitalize">{level}</span>
                              <span className="text-gray-500">{count} cards</span>
                            </div>
                            <div className="w-full bg-gray-200 rounded-full h-2">
                              <div className={`h-2 rounded-full ${level === 'hard' ? 'bg-red-500' : level === 'medium' ? 'bg-yellow-500' : 'bg-green-500'}`} style={{width: `${pct}%`}} />
                            </div>
                          </div>
                        );
                      })}
                    </div>
                  </div>
                </div>
              )}

              {ui.view === 'settings' && (
                <div>
                  <div className="grid grid-cols-2 gap-6 mb-6">
                    <div className="bg-purple-50 rounded-xl p-6">
                      <h2 className="text-xl font-semibold mb-4">Add Category</h2>
                      <div className="flex gap-3">
                        <input value={temp.newCategory} onChange={e => setTemp({...temp,newCategory:e.target.value})} placeholder="Category name..." className="flex-1 px-4 py-2 border rounded-lg" />
                        <button onClick={() => {
                          const t = temp.newCategory.trim();
                          if (t && !data.categories.includes(t)) {
                            setData({...data,categories:[...data.categories,t]});
                            setTemp({...temp,newCategory:''});
                          }
                        }} className="px-6 py-2 bg-purple-600 text-white rounded-lg">Add</button>
                      </div>
                    </div>
                    <div className="bg-blue-50 rounded-xl p-6">
                      <h2 className="text-xl font-semibold mb-4">Export/Import</h2>
                      <div className="flex gap-3">
                        <button onClick={() => exportData('json')} className="flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg">JSON</button>
                        <button onClick={() => exportData('csv')} className="flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg">CSV</button>
                        <label className="flex-1 px-4 py-2 bg-green-600 text-white rounded-lg text-center cursor-pointer">
                          Import
                          <input type="file" accept=".json,.csv" onChange={importData} className="hidden" />
                        </label>
                      </div>
                    </div>
                  </div>
                  <div>
                    <h2 className="text-xl font-semibold mb-4">Categories ({data.categories.length})</h2>
                    <div className="grid grid-cols-2 gap-3">
                      {data.categories.map((c,i) => {
                        const count = data.entries.filter(e => e.category === c).length;
                        return (
                          <div key={i} className="border rounded-lg p-4 flex justify-between items-center">
                            {temp.editCat === i ? (
                              <>
                                <input value={temp.editCatName} onChange={e => setTemp({...temp,editCatName:e.target.value})} className="flex-1 px-3 py-1 border rounded mr-2" />
                                <div className="flex gap-2">
                                  <button onClick={() => {
                                    const t = temp.editCatName.trim();
                                    if (t) {
                                      const newCats = [...data.categories];
                                      newCats[i] = t;
                                      setData({...data,categories:newCats,entries:data.entries.map(e => e.category === c ? {...e,category:t} : e)});
                                    }
                                    setTemp({...temp,editCat:null,editCatName:''});
                                  }} className="text-green-600">‚úì</button>
                                  <button onClick={() => setTemp({...temp,editCat:null,editCatName:''})} className="text-gray-600">‚úï</button>
                                </div>
                              </>
                            ) : (
                              <>
                                <div>
                                  <p className="font-medium">{c}</p>
                                  <p className="text-sm text-gray-500">{count} cards</p>
                                </div>
                                <div className="flex gap-2">
                                  <button onClick={() => setTemp({...temp,editCat:i,editCatName:c})} className="text-indigo-600">‚úé</button>
                                  {count === 0 && (
                                    <button onClick={() => {
                                      if(confirm(`Delete "${c}"?`)) {
                                        setData({...data,categories:data.categories.filter((_,idx) => idx !== i)});
                                      }
                                    }} className="text-red-500">üóë</button>
                                  )}
                                </div>
                              </>
                            )}
                          </div>
                        );
                      })}
                    </div>
                    <p className="text-sm text-gray-500 mt-4">Edit to rename. Can't delete categories with cards.</p>
                  </div>
                </div>
              )}
            </div>
          </div>
        </div>
      );
    }

    ReactDOM.render(<App />, document.getElementById('root'));
  </script>
</body>
</html>
